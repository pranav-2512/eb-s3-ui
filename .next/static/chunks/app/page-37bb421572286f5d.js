(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{295:(e,t,a)=>{Promise.resolve().then(a.bind(a,2098))},2098:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>L});var r=a(8045),s=a(5177),l=a(2207),n=a(1251);function o(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,l.$)(t))}let i=s.forwardRef((e,t)=>{let{children:a,className:s="",...l}=e;return(0,r.jsx)("div",{ref:t,className:o("rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 shadow-sm",s),...l,children:a})});i.displayName="Card";let d=s.forwardRef((e,t)=>{let{children:a,className:s="",...l}=e;return(0,r.jsx)("div",{ref:t,className:o("p-6",s),...l,children:a})});d.displayName="CardContent";var c=a(4791),x=a(6354),m=a(542),u=a(19),h=a(6486),p=a(2431),g=a(6904),f=a(8502),b=a(6800),w=a(2989),j=a(9502);let v=(0,a(1399).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function k(e){let{className:t,variant:a,size:s,asChild:l=!1,...n}=e,i=l?j.DX:"button";return(0,r.jsx)(i,{"data-slot":"button",className:o(v({variant:a,size:s,className:t})),...n})}var y=a(2511),N=a(7576),C=a(8580),I=a(2770);function E(){let[e,t]=(0,s.useState)("welcome"),{setRole:a,setUserId:l}=(0,b.I)(),n=(0,s.useRef)(null),o=(0,s.useRef)(null),i=(0,s.useRef)(null),d=(0,s.useRef)(null),c=async()=>{var e,t;let r=(null==(e=i.current)?void 0:e.value)||"",s=(null==(t=d.current)?void 0:t.value)||"";try{let e=await fetch("/api/validate-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:s})}),t=await e.json();t.valid?(a("user"),l(t.userId||"user/user001"),setTimeout(()=>{window.location.reload()},100)):alert("Invalid user credentials")}catch(e){console.error("User login error:",e),alert("Failed to validate user credentials. Please try again.")}},x=async()=>{var e,t;let r=(null==(e=n.current)?void 0:e.value)||"",s=(null==(t=o.current)?void 0:t.value)||"";try{let e=await fetch("/api/validate-admin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:s})}),t=await e.json();t.valid?(a("admin"),l(t.adminId||"admin/admin001"),setTimeout(()=>{window.location.reload()},100)):alert("Invalid admin credentials")}catch(e){console.error("Admin login error:",e),alert("Failed to validate admin credentials. Please try again.")}};return"welcome"===e?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-purple-100 to-pink-100 dark:from-[#0a1020] dark:via-[#181c2f] dark:to-[#2a1a3a] p-2",children:(0,r.jsxs)("div",{className:"w-full max-w-3xl rounded-2xl shadow-xl bg-white/95 dark:bg-[#181c2f]/95 px-4 py-8 flex flex-col gap-6",children:[(0,r.jsxs)("div",{className:"text-center mb-1",children:[(0,r.jsxs)("h1",{className:"text-2xl md:text-3xl font-extrabold text-slate-900 dark:text-white tracking-tight mb-1",children:["Welcome to ",(0,r.jsx)("span",{className:"text-purple-600 dark:text-purple-400",children:"EB Cloud Storage"})]}),(0,r.jsx)("p",{className:"text-base md:text-lg text-slate-600 dark:text-slate-300 font-medium",children:"Choose your access mode to get started"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center rounded-xl border border-blue-200 dark:border-blue-700 bg-white/80 dark:bg-[#23263a]/80 shadow hover:shadow-lg transition-all hover:border-blue-400 dark:hover:border-blue-400 p-5 group",children:[(0,r.jsx)(y.A,{className:"w-8 h-8 text-blue-600 dark:text-blue-400 mb-2 group-hover:scale-110 transition-transform"}),(0,r.jsx)("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-1",children:"Guest"}),(0,r.jsxs)("ul",{className:"mb-4 space-y-0.5 text-xs text-center",children:[(0,r.jsxs)("li",{className:"flex items-center gap-1 justify-center",children:[(0,r.jsx)("span",{className:"text-green-500",children:"✔"})," View files"]}),(0,r.jsxs)("li",{className:"flex items-center gap-1 justify-center",children:[(0,r.jsx)("span",{className:"text-red-400",children:"✖"})," Download"]}),(0,r.jsxs)("li",{className:"flex items-center gap-1 justify-center",children:[(0,r.jsx)("span",{className:"text-red-400",children:"✖"})," Upload"]}),(0,r.jsxs)("li",{className:"flex items-center gap-1 justify-center",children:[(0,r.jsx)("span",{className:"text-red-400",children:"✖"})," Create folders"]})]}),(0,r.jsxs)(k,{className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold flex items-center justify-center gap-2 text-xs py-2",onClick:()=>{a("guest"),l("guest/guest000")},children:[(0,r.jsx)(N.A,{className:"w-4 h-4"})," Continue"]})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center rounded-xl border border-green-200 dark:border-green-700 bg-white/80 dark:bg-[#23263a]/80 shadow hover:shadow-lg transition-all hover:border-green-400 dark:hover:border-green-400 p-5 group",children:[(0,r.jsx)(C.A,{className:"w-8 h-8 text-green-600 dark:text-green-400 mb-2 group-hover:scale-110 transition-transform"}),(0,r.jsx)("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-1",children:"User"}),(0,r.jsxs)("ul",{className:"mb-4 space-y-0.5 text-xs text-center",children:[(0,r.jsxs)("li",{className:"flex items-center gap-1 justify-center",children:[(0,r.jsx)("span",{className:"text-green-500",children:"✔"})," View"]}),(0,r.jsxs)("li",{className:"flex items-center gap-1 justify-center",children:[(0,r.jsx)("span",{className:"text-green-500",children:"✔"})," Download"]}),(0,r.jsxs)("li",{className:"flex items-center gap-1 justify-center",children:[(0,r.jsx)("span",{className:"text-green-500",children:"✔"})," Upload"]}),(0,r.jsxs)("li",{className:"flex items-center gap-1 justify-center",children:[(0,r.jsx)("span",{className:"text-green-500",children:"✔"})," Create folders"]})]}),(0,r.jsxs)(k,{className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold flex items-center justify-center gap-2 text-xs py-2",onClick:()=>t("user"),children:[(0,r.jsx)(N.A,{className:"w-4 h-4"})," Continue"]})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center rounded-xl border border-purple-200 dark:border-purple-700 bg-white/80 dark:bg-[#23263a]/80 shadow hover:shadow-lg transition-all hover:border-purple-400 dark:hover:border-purple-400 p-5 group",children:[(0,r.jsx)(I.A,{className:"w-8 h-8 text-purple-600 dark:text-purple-400 mb-2 group-hover:scale-110 transition-transform"}),(0,r.jsx)("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-1",children:"Admin"}),(0,r.jsxs)("ul",{className:"mb-4 space-y-0.5 text-xs text-center",children:[(0,r.jsxs)("li",{className:"flex items-center gap-1 justify-center",children:[(0,r.jsx)("span",{className:"text-green-500",children:"✔"})," All permissions"]}),(0,r.jsxs)("li",{className:"flex items-center gap-1 justify-center",children:[(0,r.jsx)("span",{className:"text-green-500",children:"✔"})," Delete files/folders"]}),(0,r.jsxs)("li",{className:"flex items-center gap-1 justify-center",children:[(0,r.jsx)("span",{className:"text-green-500",children:"✔"})," Manage users"]}),(0,r.jsxs)("li",{className:"flex items-center gap-1 justify-center",children:[(0,r.jsx)("span",{className:"text-green-500",children:"✔"})," System settings"]})]}),(0,r.jsxs)(k,{className:"w-full bg-purple-600 hover:bg-purple-700 text-white font-semibold flex items-center justify-center gap-2 text-xs py-2",onClick:()=>t("admin"),children:[(0,r.jsx)(N.A,{className:"w-4 h-4"})," Continue"]})]})]})]})}):"user"===e?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-purple-100 to-pink-100 dark:from-[#0a1020] dark:via-[#181c2f] dark:to-[#2a1a3a] p-2",children:(0,r.jsxs)("div",{className:"w-full max-w-xs rounded-xl shadow-xl bg-white/95 dark:bg-[#181c2f]/95 px-4 py-8 flex flex-col gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center mb-2",children:[(0,r.jsx)(w.default,{src:"/Eb_Logo.png",alt:"EB Logo",width:40,height:40,className:"rounded-xl mb-2"}),(0,r.jsx)(C.A,{className:"w-8 h-8 text-green-600 dark:text-green-400 mb-2"}),(0,r.jsx)("h2",{className:"text-lg font-bold text-slate-800 dark:text-white mb-1",children:"User Login"}),(0,r.jsx)("p",{className:"text-slate-500 dark:text-slate-300 text-center text-xs",children:"Enter your user credentials"})]}),(0,r.jsx)("input",{ref:i,type:"text",placeholder:"Username",className:"w-full px-3 py-2 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent mb-2"}),(0,r.jsx)("input",{ref:d,type:"password",placeholder:"Password",className:"w-full px-3 py-2 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent mb-3"}),(0,r.jsxs)(k,{onClick:c,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold flex items-center justify-center gap-2 py-2 text-base",children:[(0,r.jsx)(N.A,{className:"w-4 h-4"})," Login as User"]}),(0,r.jsx)(k,{onClick:()=>t("welcome"),variant:"outline",className:"w-full text-xs",children:"← Back to Options"})]})}):"admin"===e?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-purple-100 to-pink-100 dark:from-[#0a1020] dark:via-[#181c2f] dark:to-[#2a1a3a] p-2",children:(0,r.jsxs)("div",{className:"w-full max-w-xs rounded-xl shadow-xl bg-white/95 dark:bg-[#181c2f]/95 px-4 py-8 flex flex-col gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center mb-2",children:[(0,r.jsx)(w.default,{src:"/Eb_Logo.png",alt:"EB Logo",width:40,height:40,className:"rounded-xl mb-2"}),(0,r.jsx)(I.A,{className:"w-8 h-8 text-purple-600 dark:text-purple-400 mb-2"}),(0,r.jsx)("h2",{className:"text-lg font-bold text-slate-800 dark:text-white mb-1",children:"Admin Login"}),(0,r.jsx)("p",{className:"text-slate-500 dark:text-slate-300 text-center text-xs",children:"Enter your admin credentials"})]}),(0,r.jsx)("input",{ref:n,type:"text",placeholder:"Username",className:"w-full px-3 py-2 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent mb-2"}),(0,r.jsx)("input",{ref:o,type:"password",placeholder:"Password",className:"w-full px-3 py-2 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent mb-3"}),(0,r.jsxs)(k,{onClick:x,className:"w-full bg-purple-600 hover:bg-purple-700 text-white font-semibold flex items-center justify-center gap-2 py-2 text-base",children:[(0,r.jsx)(N.A,{className:"w-4 h-4"})," Login as Admin"]}),(0,r.jsx)(k,{onClick:()=>t("welcome"),variant:"outline",className:"w-full text-xs",children:"← Back to Options"})]})}):null}async function S(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e?"/api/objects?prefix=".concat(encodeURIComponent(e)):"/api/objects",a=await fetch(t);if(!a.ok)throw Error("Failed to list objects");return a.json()}async function A(e){if(!(await fetch("/api/create-folder?key=".concat(encodeURIComponent(e)),{method:"POST"})).ok)throw Error("Failed to create folder")}async function U(e){if(!(await fetch("/api/delete-folder?key=".concat(encodeURIComponent(e)),{method:"DELETE"})).ok)throw Error("Failed to delete folder")}async function R(e){let t=await fetch("/api/upload?key=".concat(encodeURIComponent(e)));if(!t.ok)throw Error("Failed to get upload URL");let{url:a}=await t.json();return a}async function F(e,t){let a=await fetch("/api/download?key=".concat(encodeURIComponent(e),"&disposition=attachment&filename=").concat(encodeURIComponent(t)));if(!a.ok)throw Error("Failed to get download URL");let{url:r}=await a.json();return r}async function D(e){if(!(await fetch("/api/delete?key=".concat(encodeURIComponent(e)),{method:"DELETE"})).ok)throw Error("Failed to delete object")}function P(){let[e,t]=(0,s.useState)({files:[],folders:[]}),[a,l]=(0,s.useState)(""),{permissions:n,role:o}=(0,b.I)();if((0,s.useEffect)(()=>{o&&n&&S(a).then(t).catch(()=>{})},[a,o,n]),!o||!n)return null;let w=a?["EB-root-s3",...a.replace(/\/$/,"").split("/").filter(Boolean)]:["EB-root-s3"];return(0,r.jsxs)("div",{className:"min-h-screen w-full transition-colors bg-white text-black dark:bg-black dark:text-white",children:[(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-8 min-h-[calc(100vh-200px)]",children:(0,r.jsx)(i,{children:(0,r.jsxs)(d,{className:"p-8",children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-8 flex-wrap gap-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[a&&(0,r.jsxs)("button",{className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-slate-700 dark:text-white    bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded-md hover:bg-slate-50 dark:hover:bg-slate-700    transition-all",onClick:function(){if(!a)return;let e=a.replace(/\/$/,"").split("/");e.pop(),l(e.length?e.join("/")+"/":"")},children:[(0,r.jsx)(c.A,{className:"w-4 h-4"}),"Back"]}),(0,r.jsx)(x.A,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"}),(0,r.jsx)("nav",{className:"flex items-center gap-1 text-sm flex-wrap",children:w.map((e,t)=>(0,r.jsxs)("span",{className:"flex items-center",children:[t>0&&(0,r.jsx)(m.A,{className:"w-4 h-4 text-slate-500 dark:text-slate-300 mx-1"}),(0,r.jsx)("button",{onClick:()=>{0===t?l(""):l(w.slice(1,t+1).join("/")+"/")},className:"px-2 py-1 rounded-md transition-all ".concat(t===w.length-1?"font-bold text-blue-600 dark:text-blue-400":"hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-700 dark:text-white"),children:e})]},t))}),n.canCreateFolder&&(0,r.jsxs)("button",{onClick:async()=>{let e=prompt("Enter folder name:");if(e)try{let r=a+e+"/";await A(r);let s=await S(a);t(s)}catch(e){console.error("Error creating folder:",e),alert("Failed to create folder. Please try again.")}},className:"flex items-center gap-2 px-4 py-2 text-sm font-medium    bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700    text-slate-800 dark:text-white rounded-lg transition-colors ml-2",children:[(0,r.jsx)(x.A,{className:"w-4 h-4"}),"New Folder"]}),n.canUpload&&(0,r.jsxs)("button",{onClick:()=>{var e;return null==(e=document.getElementById("upload-to-current"))?void 0:e.click()},className:"flex items-center gap-2 px-4 py-2 text-sm font-medium    bg-blue-600 hover:bg-blue-700 text-white rounded-lg    transition-colors ml-2",children:[(0,r.jsx)(u.A,{className:"w-4 h-4"}),"Upload File"]}),n.canManageUsers&&(0,r.jsxs)("button",{onClick:()=>{alert("User management feature coming soon!")},className:"flex items-center gap-2 px-4 py-2 text-sm font-medium    bg-purple-600 hover:bg-purple-700 text-white rounded-lg    transition-colors ml-2",children:[(0,r.jsx)(h.A,{className:"w-4 h-4"}),"Manage Users"]}),(0,r.jsx)("input",{type:"file",id:"upload-to-current",className:"hidden",onChange:async e=>{var r;let s=null==(r=e.target.files)?void 0:r[0];if(s)try{let e=await R(a+s.name);await fetch(e,{method:"PUT",body:s,headers:{"Content-Type":s.type}});let r=await S(a);t(r)}catch(e){console.error("Error uploading file:",e),alert("Failed to upload file. Please try again.")}}})]})}),(0,r.jsxs)("ul",{className:"divide-y divide-slate-200/50 dark:divide-white/10",children:[0===e.folders.length&&0===e.files.length&&(0,r.jsx)("li",{className:"text-slate-500 dark:text-slate-200 py-8 text-center bg-slate-50/30 dark:bg-slate-800/40 rounded-lg",children:"No items found"}),e.folders.map(e=>(0,r.jsxs)("li",{className:"flex items-center justify-between py-4 px-4    hover:bg-slate-100/50 dark:hover:bg-slate-800/40 rounded-xl transition-all duration-300    cursor-pointer group",children:[(0,r.jsxs)("div",{onClick:()=>l(e),className:"flex items-center gap-3 flex-1",children:[(0,r.jsx)(x.A,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),(0,r.jsx)("span",{className:"text-sm font-medium text-slate-800 dark:text-white tracking-wide",children:e.replace(a,"").replace("/","")})]}),n.canDelete&&(0,r.jsxs)("button",{onClick:async r=>{if(r.stopPropagation(),confirm('Are you sure you want to delete the folder "'.concat(e.replace(a,"").replace("/",""),'"? This will delete all contents inside.')))try{await U(e);let r=await S(a);t(r)}catch(e){console.error("Error deleting folder:",e),alert("Failed to delete folder. Please try again.")}},className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-red-600    bg-red-50 dark:bg-red-900/30 rounded-md hover:bg-red-100 dark:hover:bg-red-900/50 transition-all ml-4",title:"Delete Folder",children:[(0,r.jsx)(p.A,{className:"w-4 h-4"}),"Delete"]})]},e)),e.files.map(e=>(0,r.jsxs)("li",{className:"flex items-center justify-between py-4 px-4    hover:bg-slate-100/50 dark:hover:bg-slate-800/40 rounded-xl transition-all duration-300",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,r.jsx)(g.A,{className:"w-5 h-5 text-slate-500 dark:text-slate-200 flex-shrink-0"}),(0,r.jsxs)("div",{className:"min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-slate-800 dark:text-white tracking-wide truncate",children:a?e.Key.replace(a,""):e.Key}),(0,r.jsxs)("p",{className:"text-xs text-slate-500 dark:text-slate-300 mt-0.5",children:[(e.Size/1024).toFixed(1)," KB • ",new Date(e.LastModified).toLocaleString()]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[n.canView&&(0,r.jsx)("button",{onClick:()=>{let t="/api/view?key=".concat(encodeURIComponent(e.FullKey));window.open(t,"_blank")},className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-slate-700 dark:text-white    bg-slate-100 dark:bg-slate-800 rounded-md hover:bg-slate-200 dark:hover:bg-slate-700 transition-all",title:"View",children:"View"}),n.canDownload&&(0,r.jsxs)("button",{onClick:async()=>{try{let t=await F(e.FullKey,e.Key.split("/").pop()||"download"),a=document.createElement("a");a.href=t,a.download=e.Key.split("/").pop()||"download",document.body.appendChild(a),a.click(),document.body.removeChild(a)}catch(e){console.error("Error downloading file:",e),alert("Failed to download file. Please try again.")}},className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400    bg-blue-50 dark:bg-blue-900/30 rounded-md hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-all",title:"Download",children:[(0,r.jsx)(f.A,{className:"w-4 h-4"}),"Download"]}),n.canDelete&&(0,r.jsxs)("button",{onClick:async()=>{if(confirm('Are you sure you want to delete "'.concat(e.Key.split("/").pop(),'"?')))try{await D(e.FullKey);let r=await S(a);t(r)}catch(e){console.error("Error deleting file:",e),alert("Failed to delete file. Please try again.")}},className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-red-600 dark:text-red-400    bg-red-50 dark:bg-red-900/30 rounded-md hover:bg-red-100 dark:hover:bg-red-900/50 transition-all",title:"Delete",children:[(0,r.jsx)(p.A,{className:"w-4 h-4"}),"Delete"]})]})]},e.Key))]})]})})}),"guest"===o&&(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:(0,r.jsx)("div",{className:"text-center",children:(0,r.jsxs)("div",{className:"backdrop-blur-md bg-blue-50/80 dark:bg-blue-900/20 rounded-xl shadow-lg border border-blue-200/50 dark:border-blue-700/50 p-6",children:[(0,r.jsx)("p",{className:"text-lg font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"You're viewing as Guest!"}),(0,r.jsx)("p",{className:"text-sm text-blue-600 dark:text-blue-300 mb-2",children:"For full access, request admin privileges or sign in as a user \uD83D\uDC99"})]})})})]})}function L(){let{role:e,isLoading:t}=(0,b.I)();return t?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-slate-600 dark:text-slate-300",children:"Loading..."})]})}):e&&!t?(0,r.jsx)(P,{}):(0,r.jsx)(E,{})}},6800:(e,t,a)=>{"use strict";a.d(t,{I:()=>o,RoleProvider:()=>n});var r=a(8045),s=a(5177);let l=(0,s.createContext)({role:void 0,setRole:()=>{},realRole:void 0,setRealRole:()=>{},permissions:{},userId:null,setUserId:()=>{},isLoading:!0});function n(e){let{children:t}=e,[a,n]=(0,s.useState)(void 0),[o,i]=(0,s.useState)(void 0),[d,c]=(0,s.useState)(null),[x,m]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{let e=localStorage.getItem("role"),t=localStorage.getItem("realRole"),a=localStorage.getItem("userId")||localStorage.getItem("guestId")||localStorage.getItem("adminId");e&&n(e),t&&i(t),a&&c(a),m(!1)},[]),(0,s.useEffect)(()=>{a?localStorage.setItem("role",a):localStorage.removeItem("role")},[a]),(0,s.useEffect)(()=>{o?localStorage.setItem("realRole",o):localStorage.removeItem("realRole")},[o]),(0,s.useEffect)(()=>{d?"guest"===a?localStorage.setItem("guestId",d):"admin"===a?localStorage.setItem("adminId",d):localStorage.setItem("userId",d):(localStorage.removeItem("userId"),localStorage.removeItem("guestId"),localStorage.removeItem("adminId"))},[d,a]),(0,r.jsx)(l.Provider,{value:{role:a,setRole:e=>{"admin"===o&&"admin"!==e?n(e):(n(e),i(e))},realRole:o,setRealRole:i,permissions:{canView:!!a,canDownload:"user"===a||"admin"===a,canUpload:"user"===a||"admin"===a,canCreateFolder:"user"===a||"admin"===a,canDelete:"admin"===a,canManageUsers:"admin"===a},userId:d,setUserId:e=>{c(e)},isLoading:x},children:t})}function o(){return(0,s.useContext)(l)}}},e=>{e.O(0,[856,75,986,143,358],()=>e(e.s=295)),_N_E=e.O()}]);